FORM set_column_visibility_by_state.

  DATA(lo_cols) = lo_alv->get_columns( ).

  TRY.
      " Operation long text
      lo_cols->get_column( 'LT_FORMAT' )->set_visible( gv_ltext_level = 'OPER' ).
    CATCH cx_salv_not_found.
  ENDTRY.

  TRY.
      lo_cols->get_column( 'LT_TEXT' )->set_visible( gv_ltext_level = 'OPER' ).
    CATCH cx_salv_not_found.
  ENDTRY.

  TRY.
      " Characteristic long text
      lo_cols->get_column( 'CH_LT_FORMAT' )->set_visible( gv_ltext_level = 'CHAR' ).
    CATCH cx_salv_not_found.
  ENDTRY.

  TRY.
      lo_cols->get_column( 'CH_LT_TEXT' )->set_visible( gv_ltext_level = 'CHAR' ).
    CATCH cx_salv_not_found.
  ENDTRY.

ENDFORM.