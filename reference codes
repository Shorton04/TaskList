MODULE status_0100 OUTPUT.

  DATA: lv_pfstatus TYPE sy-pfkey,
        lv_title    TYPE string.

  "Set proper PF-STATUS based on current toggles
  IF gv_show_char = abap_true AND gv_show_ltxt = abap_false.
    lv_pfstatus = 'ZSALV_CHAR_SHOW'.
  ELSEIF gv_show_ltxt = abap_true AND gv_show_char = abap_false.
    lv_pfstatus = 'ZSALV_LTXT_SHOW'.
  ELSEIF gv_show_ltxt = abap_true AND gv_show_char = abap_true.
    lv_pfstatus = 'ZSALV_BOTH_SHOW'.
  ELSE.
    lv_pfstatus = 'ZSALV_NONE_SHOW'.
  ENDIF.

  SET PF-STATUS lv_pfstatus.

  "Set titlebar
  lv_title = 'Maintenance Task List Report'.

  IF gv_show_char = abap_true.
    lv_title = lv_title && ' - Characteristics Active'.
  ENDIF.

  IF gv_show_ltxt = abap_true.
    lv_title = lv_title && ' - Long Text Active'.
  ENDIF.

  SET TITLEBAR 'TITLE_100' WITH lv_title.

  "Build ALV visibility rules
  PERFORM set_column_visibility_by_state.

ENDMODULE.