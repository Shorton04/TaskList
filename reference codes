WHEN 'SHOWCHAR'.   "Your Show Characteristics button
  gv_show_char = abap_true.
  PERFORM get_data.
  PERFORM build_display.
  PERFORM set_column_visibility_by_state.
  PERFORM apply_column_order.
  IF lo_alv IS BOUND.
    lo_alv->refresh( ).
  ENDIF.

WHEN 'HIDECHAR'.   "Your Hide Characteristics button
  gv_show_char = abap_false.
  PERFORM get_data.
  PERFORM build_display.
  PERFORM set_column_visibility_by_state.
  PERFORM apply_column_order.
  IF lo_alv IS BOUND.
    lo_alv->refresh( ).
  ENDIF.