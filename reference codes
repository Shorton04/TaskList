"================ OPERATION LONG TEXT FILTER ================
IF so_opltx IS NOT INITIAL.

  DATA: lt_lines TYPE STANDARD TABLE OF tline,
        ls_line  TYPE tline,
        lv_name  TYPE thead-tdname,
        lv_found TYPE abap_bool.

  CLEAR lv_name.

  "USE EXACT SAME KEY as append_op_longtext
  CONCATENATE sy-mandt
              gs_base-plnty
              gs_base-plnnr
              gs_base-plnkn
              gs_base-zaehl
         INTO lv_name.

  CALL FUNCTION 'READ_TEXT'
    EXPORTING
      id       = 'PLPO'
      name     = lv_name
      object   = 'ROUTING'
      language = sy-langu
    TABLES
      lines    = lt_lines
    EXCEPTIONS
      OTHERS   = 4.

  LOOP AT lt_lines INTO ls_line.
    IF ls_line-tdline CP so_opltx.
      lv_found = abap_true.
      EXIT.
    ENDIF.
  ENDLOOP.

  IF lv_found = abap_false.
    CONTINUE.
  ENDIF.

ENDIF.


"================ CHARACTERISTIC LONG TEXT FILTER ================
IF so_chltx IS NOT INITIAL AND gs_base-merknr IS NOT INITIAL.

  DATA: lt_lines2 TYPE STANDARD TABLE OF tline,
        ls_line2  TYPE tline,
        lv_name2 TYPE thead-tdname,
        lv_found2 TYPE abap_bool.

  CLEAR lv_name2.

  "USE EXACT SAME KEY as append_char_longtext
  CONCATENATE sy-mandt
              gs_base-plnty
              gs_base-plnnr
              gs_base-plnkn
              gs_base-merknr
              gs_base-zaehl
         INTO lv_name2.

  CALL FUNCTION 'READ_TEXT'
    EXPORTING
      id       = 'QM'
      name     = lv_name2
      object   = 'QSS'
      language = sy-langu
    TABLES
      lines    = lt_lines2
    EXCEPTIONS
      OTHERS   = 8.

  LOOP AT lt_lines2 INTO ls_line2.
    IF ls_line2-tdline CP so_chltx.
      lv_found2 = abap_true.
      EXIT.
    ENDIF.
  ENDLOOP.

  IF lv_found2 = abap_false.
    CONTINUE.
  ENDIF.

ENDIF.