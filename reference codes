FORM set_pfstatus_from_state.

  " *** IMPORTANT ***
  " DO NOT call lo_alv->set_screen_status here.
  " SALV in container mode does not support it.

  DATA lv_pf TYPE sypfkey.

  IF gv_show_char = gc_false AND gv_show_ltxt = gc_false.
    lv_pf = 'ZSALV_BOTH_HIDE'.
  ELSEIF gv_show_char = gc_false AND gv_show_ltxt = gc_true.
    lv_pf = 'ZSALV_LTXT_SHOW'.
  ELSEIF gv_show_char = gc_true AND gv_show_ltxt = gc_false.
    lv_pf = 'ZSALV_CLIST_ONLY'.
  ELSE.
    lv_pf = 'ZSALV_CLIST_LTXT'.
  ENDIF.

  "Set PF-STATUS using the screen, NOT SALV
  SET PF-STATUS lv_pf OF PROGRAM sy-repid.

ENDFORM.