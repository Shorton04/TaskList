REPORT ztest_char_ltxt.

PARAMETERS: p_plnty TYPE plmk-plnty,
            p_plnnr TYPE plmk-plnnr,
            p_plnkn TYPE plmk-plnkn,
            p_merkn TYPE plmk-merknr,
            p_zaehl TYPE plmk-zaehl.

DATA: lt_text TYPE STANDARD TABLE OF tline,
      ls_line TYPE tline,
      lv_tdname TYPE thead-tdname.

" Build TDNAME exactly like IA39
lv_tdname =
      |{ sy-mandt      ALPHA = IN }|
   && |{ p_plnty       ALPHA = IN }|
   && |{ p_plnnr       ALPHA = IN }|
   && |{ p_plnkn       ALPHA = IN }|
   && ' '                         " <- required space
   && |{ p_merkn       ALPHA = IN }|
   && |{ p_zaehl       ALPHA = IN }|.

WRITE: / 'TDNAME:', lv_tdname.

CALL FUNCTION 'READ_TEXT'
  EXPORTING
    id      = 'QM'
    name    = lv_tdname
    language = sy-langu
    object   = 'QSS'
  TABLES
    lines = lt_text
  EXCEPTIONS
    OTHERS = 4.

IF lt_text IS INITIAL.
  WRITE: / 'No long text found'.
ELSE.
  LOOP AT lt_text INTO ls_line.
    WRITE: / ls_line-tdline.
  ENDLOOP.
ENDIF.