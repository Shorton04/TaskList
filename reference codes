MODULE status_0100 OUTPUT.

  "1 — First time ALV creation
  IF go_container IS INITIAL.

    CREATE OBJECT go_container
      EXPORTING container_name = 'CC_ALV'.

    cl_salv_table=>factory(
      EXPORTING
        r_container  = go_container
      IMPORTING
        r_salv_table = lo_alv
      CHANGING
        t_table      = gt_display ).

    PERFORM set_column_visibility_by_state.
    PERFORM set_pfstatus_from_state.
    PERFORM set_title_from_state.

    PERFORM display_alv.

  ELSE.

    "2 — Recreate SALV each time with updated data
    cl_salv_table=>factory(
      EXPORTING
        r_container  = go_container
      IMPORTING
        r_salv_table = lo_alv
      CHANGING
        t_table      = gt_display ).

    PERFORM set_column_visibility_by_state.
    PERFORM set_pfstatus_from_state.
    PERFORM set_title_from_state.

    lo_alv->display( ).

  ENDIF.

ENDMODULE.