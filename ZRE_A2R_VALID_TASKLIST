*&---------------------------------------------------------------------*
*& Report  ZRE_A2R_VALID_TASKLIST
*&---------------------------------------------------------------------*
REPORT zre_a2r_valid_tasklist.

INCLUDE zre_a2r_valid_tasklist_top.
INCLUDE zre_a2r_valid_tasklist_sel.
INCLUDE zre_a2r_valid_tasklist_f01.

INITIALIZATION.
  CLEAR so_keydt.
  so_keydt-sign = 'I'.
  so_keydt-option = 'EQ'.
  so_keydt-low = sy-datum.
  APPEND so_keydt.

*---------------------------------------------------------------------*
* Selection-screen checks
*---------------------------------------------------------------------*
AT SELECTION-SCREEN.
  PERFORM validate_selection.

*---------------------------------------------------------------------*
* Main processing
*---------------------------------------------------------------------*
START-OF-SELECTION.

  "Initial state of toggles comes from checkboxes
  IF p_showc = 'X'.
    gv_show_char = gc_true.
  ELSE.
    gv_show_char = gc_false.
  ENDIF.

  IF p_showl = 'X'.
    gv_show_ltxt = gc_true.
  ELSE.
    gv_show_ltxt = gc_false.
  ENDIF.

  PERFORM get_data.

  IF gt_base IS INITIAL.
    MESSAGE s398(00) WITH 'No data found for the given selection'.
    EXIT.
  ENDIF.

  PERFORM build_display.
  PERFORM display_alv.
