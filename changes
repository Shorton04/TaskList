*---------------------------------------------------------------------*
* Display ALV (simple, compatible version – no custom buttons)
*---------------------------------------------------------------------*
FORM display_alv.

  DATA: lx_salv_msg TYPE REF TO cx_salv_msg.

  TRY.

      " Create SALV for GT_DISPLAY
      CALL METHOD cl_salv_table=>factory
        IMPORTING
          r_salv_table = lo_alv
        CHANGING
          t_table      = gt_display.

      " Columns – auto optimize
      lo_columns = lo_alv->get_columns( ).
      CALL METHOD lo_columns->set_optimize
        EXPORTING
          value = 'X'.

      " Display settings – striped pattern
      lo_disp = lo_alv->get_display_settings( ).
      CALL METHOD lo_disp->set_striped_pattern
        EXPORTING
          value = 'X'.

      " Layout – allow saving user layouts
      lo_layout = lo_alv->get_layout( ).
      ls_layout_key-report = sy-repid.
      CALL METHOD lo_layout->set_key
        EXPORTING
          value = ls_layout_key.
      CALL METHOD lo_layout->set_save_restriction
        EXPORTING
          value = if_salv_c_layout=>restrict_none.

      " Standard toolbar functions
      lo_funcs = lo_alv->get_functions( ).
      CALL METHOD lo_funcs->set_all
        EXPORTING
          value = 'X'.

      " IMPORTANT:
      " We do NOT add custom functions (no ADD_FUNCTION)
      " We also do NOT set any event handler here.

      " Show ALV
      CALL METHOD lo_alv->display( ).

    CATCH cx_salv_msg INTO lx_salv_msg.
      MESSAGE lx_salv_msg->get_text( ) TYPE 'E'.
  ENDTRY.

ENDFORM.